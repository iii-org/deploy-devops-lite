echo '========== SonarQube(Maven) =========='

apt-get update && apt-get install -y maven

cd app
mvn install

mvn clean verify sonar:sonar \
    -Dsonar.host.url=$SONAR_HOST_URL \
    -Dsonar.projectKey=$PROJECT_NAME \
    -Dsonar.projectName=$PROJECT_NAME \
    -Dsonar.projectVersion=$GIT_BRANCH:$GIT_COMMIT_ID \
	-Dsonar.qualitygate.timeout=600 \
	-Dsonar.qualitygate.wait=true \
	-Dsonar.log.level=DEBUG \
	-Dsonar.login=$SONAR_LOGIN